{% include "header.html" with page="adminshowgame" css="adminshowgame" title="Adelie Online" %}
{% if user.is_authenticated %}
<div class="container-fluid">
    <div class="row">
        <div class="span4">
            <div class="hero-unit" id="leftHolder">
                <input type="button" value="Add a Game" onClick="window.location = '/admin'" />
            </div>
        </div>
        <div class="span13" id="rightHolder">
            <div id="AddGames">
                <span class="error" id="unknownError">There was an unknown error, please try again later</span>
                <span class="error" id="titleBlank">Please enter a game title</span>
                <span class="error" id="titleDuplicate">Game Title already exists</span>
                <label>Game Title:</label>
                <input type="text" name="gameTitle" id="gameTitle" value="{{ game.title }}" /><br />
                
                <span class="error" id="tagBlank">Please enter a tag line</span>
                <label>Tag Line:</label>
                <input type="text" name="gameTagline" id="gameTagline" value="{{ game.tagLine }}" /><br />
                
                <span class="error" id="publisherBlank">Please enter a publisher</span>
                <label>Publisher:</label>
                <input type="text" name="gamePublisher" id="gamePublisher" value="{{ game.publisher }}"/><br />
                
                <span class="error" id="priceBlank">Please enter a price</span>
                <span class="error" id="priceBelowZero">Please enter a price above 0</span>
                <label>Price: $</label>
                <input type="text" name="gamePrice" id="gamePrice" value="{{ game.price }}"/><br />
                
                <span class="error" id="descBlank">Please enter a description of the game</span>
                <label>Description:</label>
                <textarea name="gameDesc" id="gameDesc">{{ game.description }}</textarea><br />
                
                <span class="error" id="startBlank">Please enter a start date</span>
                <span class="error" id="timeDiff">Make sure the end date is later than the start date</span>
                <label>Preorder Start Time:</label>
                <input type="text" name="gameStart" id="gameStart" autoComplete="off" value="{{ game.startTime|date:"m/d/Y" }}"/><br />
                
                <span class="error" id="endBlank">Please enter an end date</span>
                <label>Preorder End Time:</label>
                <input type="text" name="gameEnd" id="gameEnd" autoComplete="off" value="{{ game.endTime|date:"m/d/Y" }}" /><br />
                
                <span class="error" id="shipError">Shipping date must be later than end date</span>
                <span class="error" id="shipBlank">Please enter a shipping date</span>
                <label>Game Shipping Date</label>
                <input type="text" name="gameShip" id="gameShip" autoComplete="off" value="{{ game.shipDate|date:"m/d/Y" }}" /><br />
                
                <span class="error" id="consoleBlank">Please select at least one console</span>
                <label>Consoles:</label>
                <select id="gameConsoles" multiple>
                    {% for console in selectedconsoles %}
                        <option value="{{ console.id }}" selected>{{ console.name }}</option>
                    {% endfor %}
                    {% for console in consoles %}
                        <option value="{{ console.id }}">{{ console.name }}</option>
                    {% endfor %}
                </select><br />
                
                <button id="submitBtn" onClick="editGame()">Edit Game</button>
            </div>
            <div id="addPictures">
                <ul id="pictureList">
                {% for pic in game.pictures.all %}
                    <li>
                        <img src="{{ pic.picture.url }}" height="90px" width="90px" />
                        <span class="picCaption">{{ pic.caption }}
                        <button class="picdelete" onClick="deletePic({{ pic.id }})">Delete</button></span>
                    </li>
                {% endfor %}
                </ul>
            </div>
            <form action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" name="gameId" id="gameId" value="{{ game.id }}" />
                {{ pictureForm }}<br />
                <input type="submit" value="Add Picture" />
            </form>
            <div id="addVideo">
                <ul id="videoList">
                        <li>
                            <video width="320" height="240" controls>
                                <source src="{{ game.trailerUrl }}" type="video/mp4">
                                <source src="{{ game.trailerUrl }}" type="video/ogg">
                                <source src="{{ game.trailerUrl }}" type="video/webm">
                                <object data="{{ game.trailerUrl }}" width="320" height="240">
                                    <embed src="{{ game.trailerUrl }}" width="320" height="240">
                                </object> 
                            </video>
                        </li>
                </ul>
            </div>                
            <input type="hidden" name="gameId" value="{{ game.id }}" />
            <input type="hidden" id="hiddenGameTitle" value="{{ game.title }}" />
            <input type="file" id="id_video" /><br />
            <button onClick="s3_upload()">Add Trailer</button>
            <div id="status"></div>
        </div>
    </div>
</div>
{% else %}
<h3>Please go back to the home page. Thank you.</h3>
{% endif %}
{% include "footer.html" with js="adminshowgame" %}